language: java
jdk: oraclejdk7
before_install:
  # Install base Android SDK
  - sudo apt-get update -qq
  - sudo apt-get install expect
  - if [ `uname -m` = x86_64 ]; then sudo apt-get install -qq libstdc++6:i386 lib32z1; fi
  - wget -O android-sdk.tgz http://dl.google.com/android/android-sdk_r22.0.4-linux.tgz
  - tar xzf android-sdk.tgz
  - export ANDROID_HOME=$PWD/android-sdk-linux
  - export PATH=${PATH}:${ANDROID_HOME}/tools:${ANDROID_HOME}/platform-tools
  - chmod +x $PWD/.travis_install_android.sh
  - $PWD/.travis_install_android.sh

  - git clone git://github.com/mosabua/maven-android-sdk-deployer.git
  - cd ./maven-android-sdk-deployer/add-ons/google-apis-17
  - mvn install -P4.2
  - cd ../../
  - cd ./extras/admob
  - mvn install -P4.2
  - cd ../
  - cd ./compatibility-v4
  - mvn install -P4.2
  - cd ../../
  - cd ./platforms/android-17
  - mvn install -P4.2
  - cd ../../../
#  # Create and start emulator
#  - echo no | android create avd --force -n test -t android-17 --abi armeabi-v7a
#  - emulator -avd test -no-skin -no-audio -no-window &
#
#before_script:
#  - ./wait_for_emulator

#script: mvn install -Pintegration-tests -Dandroid.device=test
script: mvn install